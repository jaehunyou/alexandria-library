{% extends "base.html" %} {% block title %}글 목록 - 미니 게시판{% endblock %}
{% block content %}
<form method="GET" action="{{ url_for('posts_list') }}" class="mb-6 flex items-center gap-2">
  <input type="text"
         name="q"
         placeholder="검색어를 입력하세요..."
         value="{{ query }}"
         class="flex-1 rounded-md border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-slate-900/10">

  <select name="sort"
          class="rounded-md border border-slate-300 bg-white px-2 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-slate-900/10">
    <option value="recent" {% if sort_option == "recent" %}selected{% endif %}>최신순</option>
    <option value="oldest" {% if sort_option == "oldest" %}selected{% endif %}>오래된순</option>
    <option value="views"  {% if sort_option == "views"  %}selected{% endif %}>조회수순</option>
  </select>

  <button type="submit"
          class="rounded-md bg-slate-900 px-3 py-2 text-sm font-medium text-white hover:bg-slate-800">
    적용
  </button>
</form>

<section class="mb-6 flex items-center justify-between">
  <div>
    <h2 class="text-xl font-semibold tracking-tight">글 목록</h2>
    <p class="text-sm text-slate-500">
      작성된 게시글을 확인하고, 클릭해서 내용을 볼 수 있습니다.
    </p>
  </div>
  <a
    href="{{ url_for('posts_new') }}"
    class="inline-flex items-center gap-1 rounded-md bg-slate-900 px-3 py-1.5 text-sm font-medium text-white hover:bg-slate-800"
  >
    새 글 쓰기
  </a>
</section>

{% if posts %}
<ul class="space-y-3">
  {% for post in posts %}
  <li
    class="rounded-xl border border-slate-200 bg-white p-4 hover:border-slate-300 transition"
  >
    <a href="{{ url_for('posts_detail', post_id=post.id) }}" class="block">
      <div class="flex items-start justify-between gap-4">
        <div>
          <h3 class="text-base font-semibold text-slate-900 line-clamp-1">
            {{ post.title }}
          </h3>
          <p class="mt-1 text-xs text-slate-500">
            작성자 {{ post.author }} · {{ post.created_at }} · 조회수 {{
            post.views }}
          </p>
        </div>
      </div>

      <p class="mt-2 text-sm text-slate-700 line-clamp-2">{{ post.content }}</p>
    </a>
  </li>
  {% endfor %}
</ul>
{% else %}
<div
  class="rounded-xl border border-dashed border-slate-300 bg-slate-50 p-8 text-center text-sm text-slate-500"
>
  아직 작성된 글이 없습니다. <br />
  우측 상단의 <span class="font-medium text-slate-800">“새 글 쓰기”</span>를
  눌러 첫 글을 작성해보세요.
</div>
{% endif %} {% endblock %}
