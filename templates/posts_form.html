{% extends "base.html" %} {% block title %} {% if mode == "new" %} 새 글 쓰기 -
미니 게시판 {% else %} 글 수정하기 - 미니 게시판 {% endif %} {% endblock %} {%
block content %}
<section class="rounded-xl border border-slate-200 bg-white p-5">
  <h2 class="text-lg font-semibold tracking-tight mb-4">
    {% if mode == "new" %}새 글 쓰기{% else %}글 수정하기{% endif %}
  </h2>

  {% if mode == "new" %} {% set action_url = url_for('posts_new') %} {% else %}
  {% set action_url = url_for('posts_edit', post_id=post.id) %} {% endif %}

  <form
    method="POST"
    action="{{ action_url }}"
    class="space-y-4"
    enctype="multipart/form-data"
  >
    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1">제목</label>
      <input
        type="text"
        name="title"
        class="w-full rounded-md border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-slate-900/10"
        value="{% if mode == 'edit' %}{{ post.title }}{% endif %}"
      />
    </div>

    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1"
        >작성자</label
      >
      <input
        type="text"
        name="author"
        class="w-full rounded-md border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-slate-900/10"
        value="{% if mode == 'edit' %}{{ post.author }}{% endif %}"
      />
    </div>

    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1"
        >이미지 URL (선택)</label
      >
      <input
        type="text"
        name="image_url"
        class="w-full rounded-md border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-slate-900/10"
        value="{% if mode == 'edit' and post.image_url %}{{ post.image_url }}{% endif %}"
      />
      <p class="mt-1 text-xs text-slate-400">
        외부 이미지 링크가 있다면 여기에 붙여넣으세요.
      </p>
    </div>

    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1">
        YouTube URL (선택)
      </label>
      <input
        type="text"
        name="youtube_url"
        class="w-full rounded-md border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-slate-900/10"
        placeholder="예: https://www.youtube.com/watch?v=VIDEO_ID"
        value="{% if mode == 'edit' and post.youtube_url %}{{ post.youtube_url }}{% endif %}"
      />
      <p class="mt-1 text-xs text-slate-400">
        유튜브 동영상 링크를 붙여넣으면 게시글에서 바로 재생할 수 있습니다.
      </p>
    </div>

    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1">
        이미지 파일 업로드 (선택)
      </label>
      <input
        type="file"
        name="image_file"
        class="w-full text-sm text-slate-600"
      />
      <p class="mt-1 text-xs text-slate-400">
        JPG, PNG, GIF 파일을 업로드할 수 있습니다.
      </p>
    </div>

    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1">내용</label>
      <textarea
        name="content"
        rows="8"
        class="w-full rounded-md border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-slate-900/10"
      >
{% if mode == 'edit' %}{{ post.content }}{% endif %}</textarea
      >
    </div>

    <div class="flex items-center justify-between">
      <a
        href="{{ url_for('posts_list') }}"
        class="text-sm text-slate-500 hover:text-slate-800"
      >
        취소
      </a>
      <button
        type="submit"
        class="rounded-md bg-slate-900 px-4 py-2 text-sm font-medium text-white hover:bg-slate-800"
      >
        {% if mode == "new" %}등록하기{% else %}수정 완료{% endif %}
      </button>
    </div>
  </form>
</section>
{% endblock %}
